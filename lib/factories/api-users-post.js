// Generated by CoffeeScript 1.9.3
module.exports.apiUsersPost = function(urlApiUsers, POST) {
  return POST(urlApiUsers(), function(canCreateUsers, endForbidden, setHeaderLocation, endCreatedJSON, userInsertValidator, insertUser, endUnprocessableJSON, urlApiUsers, body, omitPassword) {
    if (!canCreateUsers()) {
      return endForbidden();
    }
    return userInsertValidator(body).then(function(errors) {
      if (errors != null) {
        return endUnprocessableJSON(errors);
      }
      return insertUser(body).then(function(inserted) {
        setHeaderLocation(urlApiUsers(inserted.id));
        return endCreatedJSON(omitPassword(inserted));
      });
    });
  });
};
